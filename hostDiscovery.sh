#!/bin/bash
# Script para descubrir hosts en segmentos de red

# Primer paso lanzar "ip a" para detectar los diferentes segmentos de red
# Para el ejemplo tenemos la eth0 con la inet 172.10.0.2/16 y por la eth1 tenemos 172.11.0.4/16
# Podemos observar que la eth0:172.10.0.2 y eth1:172.11.0.4 son las direcciones ip de la máquina actual por lo cual deberíamos ignorar estas a la hora de realizar un descubrimiento de puertos - Lo podemos comprobar con hostname -I 


# Definimos el array
hosts=("172.10.0" "172.11.0")

for host in ${hosts[@]}; do # recorremos el array
	echo -e "\n[+] Enumerando $host.0/24\n" # 172.10.0.0/24
	for i in $(seq 1 254); do 
		timeout 1 bash -c "ping -c 1 $host.$i" &>/dev/null && echo "[*] Host $host.$i - ACTIVO" & # comprobamos a través de una trama ICMP si el host está activo y si devuelve un código de estado exitoso que nos imprima "ACTIVO"
	done; wait # esperamos por la terminación de las 254 consultas y luego avanzar con el siguiente rango
done



# En caso de no contar con herramientas como netcat, wget u otras para transferencia de ficheros hacer lo siguiente
# ---- local ----
# base64 -w 0 hostDiscovery.sh | xclip -sel clip
# ahí ya lo tendríamos en nuestra clipboard gracias a xclip "apt-get install xclip"
# ---- víctima ----
# echo "todo lo que va por la clipboard en b64" | base64 -d > hostDiscovery.sh
# chmod +x
# ./hostDiscovery.sh


# ~ Créditos a s4vitar ~
